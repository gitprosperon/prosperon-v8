{% extends 'Students/base.html' %}
{% load static %}
{% block stylesheets %}
    <link href="{% static 'students/m2/style.css' %}" rel="stylesheet" type="text/css">

{% endblock %}


{% block content %}
<body class="body-3">
  <div class="full-page-wrapper-2">

    <div class="section-container">
      <div class="page-title-blue">
        <h1 class="heading-41">Investments </h1>
      </div>
    </div>
  </div>
  <div class="subscription-page-wrapper">
    <div class="section-header-wrapper">
      <h1 class="page-section-header-3">Select all the subscriptions you currently pay for</h1>
    </div>
    <div>


      <div class="w-layout-grid grid-27">

        <div id="w-node-cc15f417-e4bb-565b-c521-96277a83faf2-e55e6eae" class="subscription-card selected" >
          <div class="logo-icon-wrapper"><img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Basic/assets/placeholder.60f9b1840c.svg" loading="lazy" alt=""></div>
          <div class="company-name-2">
            <h1 class="_14px-2">*company name*</h1>
          </div>
        </div>

        <div id="w-node-cc15f417-e4bb-565b-c521-96277a83faf8-e55e6eae" class="subscription-card">
          <div class="logo-icon-wrapper"><img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Basic/assets/placeholder.60f9b1840c.svg" loading="lazy" alt=""></div>
          <div class="company-name-2">
            <h1 class="_14px-2">*company name*</h1>
          </div>
        </div>


      </div>
    </div>
  </div>
  <div class="reoccuring-cost-wrapper">
    <div class="section-header-wrapper">
      <h1 class="page-section-header-3">Select the subscriptions you usually pay for</h1>
    </div>
    <div>
      <div class="w-layout-grid grid-27">
          {% for subscript in subscriptions %}

            {% csrf_token %}
              <div id="w-node-cc15f417-e4bb-565b-c521-96277a83fb04-e55e6eae" class="reoccuring-cost-card" onclick="subscriptionClick(this)">
              <div class="logo-icon-wrapper">
                  <img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Basic/assets/placeholder.60f9b1840c.svg" loading="lazy" alt="">
              </div>
              <div class="company-name-2">
                <h1 class="_14px-2">{{ subscript.subscription_title }}</h1>
              </div>
              <div class="price-range-wrapper hidden">
                  <h1 class="_14px-2" id="subscription-cost">{{ subscript.subscription_cost }}</h1>
                <button type="button" id="" class="next-btn subscrup">add</button>
              </div>
        </div>

          {% endfor %}
      </div>
    </div>
  </div>





  <div class="lycter-scales">
    <div class="lycter-1">
      <div class="section-header-wrapper">
        <h1 class="page-section-header-3">Spending Profile (1/3)</h1>
      </div>
      <div class="lycter-q1"></div>
    </div>
    <div class="lycter-2">
      <div class="section-header-wrapper">
        <h1 class="page-section-header-3">Spending Profile (2/3)</h1>
      </div>
      <div class="lycter-q2"></div>
    </div>
    <div class="lycter-3">
      <div class="section-header-wrapper">
        <h1 class="page-section-header-3">Spending Profile (3/3)</h1>
      </div>
      <div class="lucter-q3"></div>
    </div>
  </div>




  <div class="add-subscription">
    <div class="_20-padding-container-2 add-new-sub">
      <div>
        <h1 class="_24px bold blue">Add a subscription</h1>
      </div>
      <div class="add-sub w-form">
        <form id="email-form" name="email-form" data-name="Email Form" method="get"><input type="text" class="text-field-2 w-input" maxlength="256" name="title" data-name="title" placeholder="Title" id="title"><input type="number" class="text-field-2 w-input" maxlength="256" name="monthly-cost" data-name="monthly cost" placeholder="Monthly Cost" id="monthly-cost">
          <div class="button-wrapper-2"><input type="submit" value="Back" data-wait="Please wait..." class="back-btn-2 w-button"><input type="submit" value="Add" data-wait="Please wait..." class="next-btn-2 w-button"></div>
        </form>
        <div class="w-form-done">
          <div>Thank you! Your submission has been received!</div>
        </div>
        <div class="w-form-fail">
          <div>Oops! Something went wrong while submitting the form.</div>
        </div>
      </div>
    </div>
  </div>
  <div class="add-monthly-cost">
    <div class="_20-padding-container-2 add-new-sub">
      <div>
        <h1 class="_24px bold blue">Add a Monthly Expense</h1>
      </div>
      <div class="add-sub w-form">
        <form id="email-form" name="email-form" data-name="Email Form" method="get"><input type="text" class="text-field-2 w-input" maxlength="256" name="title-2" data-name="Title 2" placeholder="Title" id="title-2">
          <div class="div-block-142">
            <div class="_18-poppins-3">From</div><input type="number" class="text-field-2 low-input w-input" maxlength="256" name="number-1" data-name="number 1" placeholder=" " id="number">
            <div class="_18-poppins-3">to</div><input type="number" class="text-field-2 low-input w-input" maxlength="256" name="number-1" data-name="number 1" placeholder=" " id="number">
            <div class="_18-poppins-3">each month</div>
          </div>
          <div class="button-wrapper-2"><input type="submit" value="Back" data-wait="Please wait..." class="back-btn-2 w-button"><input type="submit" value="Add" data-wait="Please wait..." class="next-btn-2 w-button"></div>
        </form>
        <div class="w-form-done">
          <div>Thank you! Your submission has been received!</div>
        </div>
        <div class="w-form-fail">
          <div>Oops! Something went wrong while submitting the form.</div>
        </div>
      </div>
    </div>
  </div>
</body>



<script>
const addButtons = document.querySelectorAll('.next-btn.subscrup')
    addButtons.forEach(addButtons => {
    addButtons.addEventListener('click', function handleClick(event) {
        var companyName = this.parentElement.parentElement.children[1].children[0].innerHTML
        var subscriptionCost = this.parentElement.children[0].innerHTML
        console.log(subscriptionCost)
        console.log(companyName)
        $.ajax({
              type: "POST",
              url: '/university/budgeting/step1',
              data: {
                  csrfmiddlewaretoken: '{{csrf_token}}',
                  action: "post",
                  subscriptionCost: subscriptionCost,
                  companyName: companyName


                }

            })
        console.log('{{csrf_token}}')


  });
});


</script>









{% endblock %}

{% block buttons %}

     <form method="post" style="width: 100%; padding:20px">
        {% csrf_token %}
            <div class="bottom-btn-wrapper" style="width: 100%; padding: 0px">
                <a href="{% url 'Students:universal-video-page' '5' %}" class="back-btn">Back</a>

                <button type="submit" class="next-btn">Next</button>
            </div>
        </form>

{% endblock %}

{% block scripts %}
        <script src="{% static 'students/js/script.js' %}" type="text/javascript"></script>


{% endblock %}