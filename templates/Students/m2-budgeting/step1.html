{% extends 'Students/base.html' %}
{% load static %}
{% block stylesheets %}
    <link href="{% static 'students/m2/style.css' %}" rel="stylesheet" type="text/css">

{% endblock %}


{% block content %}
<body class="body-3">
  <div class="full-page-wrapper-2">

    <div class="section-container">
      <div class="page-title-blue">
        <h1 class="heading-41">Investments </h1>
      </div>
    </div>
  </div>
  <div class="subscription-page-wrapper">
    <div class="section-header-wrapper">
      <h1 class="page-section-header-3">Select all the subscriptions you currently pay for</h1>
    </div>
    <div>


      <div class="w-layout-grid grid-27">

        <div id="w-node-cc15f417-e4bb-565b-c521-96277a83faf2-e55e6eae" class="subscription-card selected" >
          <div class="logo-icon-wrapper"><img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Basic/assets/placeholder.60f9b1840c.svg" loading="lazy" alt=""></div>
          <div class="company-name-2">
            <h1 class="_14px-2">*company name*</h1>
          </div>
        </div>

        <div id="w-node-cc15f417-e4bb-565b-c521-96277a83faf8-e55e6eae" class="subscription-card">
          <div class="logo-icon-wrapper"><img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Basic/assets/placeholder.60f9b1840c.svg" loading="lazy" alt=""></div>
          <div class="company-name-2">
            <h1 class="_14px-2">*company name*</h1>
          </div>
        </div>


      </div>
    </div>
  </div>
  <div class="reoccuring-cost-wrapper">
    <div class="section-header-wrapper">
      <h1 class="page-section-header-3">Select the subscriptions you usually pay for</h1>
    </div>
    <div>
      <div class="w-layout-grid grid-27" id="subscriptions-container">
          {% for subscript in subscriptions %}

            {% csrf_token %}
              <div id="w-node-cc15f417-e4bb-565b-c521-96277a83fb04-e55e6eae" class="reoccuring-cost-card" onclick="subscriptionClick(this)">
              <div class="logo-icon-wrapper">
                  <img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Basic/assets/placeholder.60f9b1840c.svg" loading="lazy" alt="">
              </div>
              <div class="company-name-2">
                <h1 class="_14px-2">{{ subscript.subscription_title }}</h1>
              </div>
              <div class="price-range-wrapper hidden">
                  <h1 class="_14px-2" id="subscription-cost">{{ subscript.subscription_cost }}</h1>
                <button type="button" id="" class="next-btn subscrup">add</button>
              </div>
        </div>

          {% endfor %}
      </div>

    <div class="w-layout-grid grid-27" id="monthly-expenses-container">
          {% for expense in monthly_expenses %}

            {% csrf_token %}
              <div id="w-node-cc15f417-e4bb-565b-c521-96277a83fb04-e55e6eae" class="reoccuring-cost-card" onclick="monthly_expenseClick(this)">
                  <div class="logo-icon-wrapper">
                      <img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Basic/assets/placeholder.60f9b1840c.svg" loading="lazy" alt="">
                  </div>
                  <div class="company-name-2">
                    <h1 class="_14px-2">{{ expense.monthly_expense_title }}</h1>
                  </div>
                  <div class="price-range-wrapper hidden">
                          <select class="monthly-ranges">
                            <option value="">-SELECT RANGE-</option>
                              {% for range in monthly_expenses_ranges %}
                                <option value="">{{ range.0 }}</option>
                              {% endfor %}
                          </select>

                    <button type="button" id="" class="next-btn monthly">add</button>
                  </div>
              </div>

          {% endfor %}
      </div>






    </div>
  </div>





  <div class="lycter-scales">
    <div class="lycter-1">
      <div class="section-header-wrapper">
        <h1 class="page-section-header-3">Spending Profile (1/3)</h1>
      </div>
      <div class="lycter-q1"></div>
    </div>
    <div class="lycter-2">
      <div class="section-header-wrapper">
        <h1 class="page-section-header-3">Spending Profile (2/3)</h1>
      </div>
      <div class="lycter-q2"></div>
    </div>
    <div class="lycter-3">
      <div class="section-header-wrapper">
        <h1 class="page-section-header-3">Spending Profile (3/3)</h1>
      </div>
      <div class="lucter-q3"></div>
    </div>
  </div>










</body>



<script>

// CODE FOR SENDING SUBSCRIPTIONS
const addButtons = document.querySelectorAll('.next-btn.subscrup')
    addButtons.forEach(addButtons => {
    addButtons.addEventListener('click', function handleClick(event) {
        var companyName = this.parentElement.parentElement.children[1].children[0].innerHTML
        var subscriptionCost = this.parentElement.children[0].innerHTML
        console.log(subscriptionCost)
        console.log(companyName)
        $.ajax({
              type: "POST",
              url: '/university/budgeting/step1',
              data: {
                  csrfmiddlewaretoken: '{{csrf_token}}',
                  action: "post",
                  subscriptionCost: subscriptionCost,
                  companyName: companyName,
                  type: 'sub'


                }

            })
        console.log('{{csrf_token}}')


  });
});


// CODE FOR SENDING SUBSCRIPTIONS
const monthlyAddButtons = document.querySelectorAll('.next-btn.monthly')
    monthlyAddButtons.forEach(monthlyAddButtons => {
    monthlyAddButtons.addEventListener('click', function handleClick(event) {
        var companyName = this.parentElement.parentElement.children[1].children[0].innerHTML
        console.log('company name', companyName)
        var selected_option = this.parentElement.children[0].options.selectedIndex
        var subscriptionCost = this.parentElement.children[0].options[selected_option].innerHTML
        if(selected_option === 0){
            console.log('it is 000000')
        } else {
            console.log('send ', selected_option)
            $.ajax({
                  type: "POST",
                  url: '/university/budgeting/step1',
                  data: {
                      csrfmiddlewaretoken: '{{csrf_token}}',
                      action: "post",
                      subscriptionCost: subscriptionCost,
                      companyName: companyName,
                      type: 'mon'


                    }

                })
        }





  });
});






</script>









{% endblock %}

{% block buttons %}

     <form method="post" style="width: 100%; padding:20px">
        {% csrf_token %}
            <div class="bottom-btn-wrapper" style="width: 100%; padding: 0px">
                <a href="{% url 'Students:universal-video-page' '5' %}" class="back-btn">Back</a>

                <button type="submit" class="next-btn">Next</button>
            </div>
        </form>

{% endblock %}

{% block scripts %}
        <script src="{% static 'students/js/script.js' %}" type="text/javascript"></script>


{% endblock %}